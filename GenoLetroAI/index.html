<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>GNLTR 0 – Neural Network AI</title>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.12.0/dist/tf.min.js"></script>
  <style>
    body {
      background-color: #0d1117;
      color: white;
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 100px;
    }

    #user-input {
      width: 400px;
      padding: 10px;
      font-size: 16px;
    }

    button {
      margin-left: 10px;
      padding: 10px 20px;
      font-weight: bold;
      cursor: pointer;
    }

    #response {
      margin-top: 30px;
      background-color: #161b22;
      padding: 15px;
      border-radius: 5px;
      width: 500px;
      text-align: left;
    }
  </style>
</head>
<body>
  <h1>GNLTR 0 Neural AI</h1>
  <div>
    <input type="text" id="user-input" placeholder="Example: calculate 5 + 3">
    <button onclick="respond()">Send</button>
  </div>
  <div id="response">Waiting for input...</div>

  <script>
    // Eğitim verisi: Komut → Kategori
    const trainingData = [
      { input: "add", output: [1, 0, 0] },
      { input: "plus", output: [1, 0, 0] },
      { input: "sum", output: [1, 0, 0] },
      { input: "multiply", output: [0, 1, 0] },
      { input: "times", output: [0, 1, 0] },
      { input: "product", output: [0, 1, 0] },
      { input: "convert", output: [0, 0, 1] },
      { input: "binary", output: [0, 0, 1] },
      { input: "hex", output: [0, 0, 1] },
    ];

    // Metni sayıya çevirme (çok basit tokenization)
    function textToVector(text) {
      const inputVector = [0, 0, 0]; // [add, multiply, convert]
      if (text.includes("add") || text.includes("plus") || text.includes("sum")) inputVector[0] = 1;
      if (text.includes("multiply") || text.includes("times") || text.includes("product")) inputVector[1] = 1;
      if (text.includes("convert") || text.includes("binary") || text.includes("hex")) inputVector[2] = 1;
      return tf.tensor2d([inputVector]);
    }

    // Sinir ağı oluştur
    const model = tf.sequential();
    model.add(tf.layers.dense({ inputShape: [3], units: 5, activation: 'relu' }));
    model.add(tf.layers.dense({ units: 3, activation: 'softmax' }));

    model.compile({
      optimizer: 'adam',
      loss: 'categoricalCrossentropy',
      metrics: ['accuracy']
    });

    async function trainModel() {
      const xs = tf.tensor2d(trainingData.map(d => textToVector(d.input).arraySync()[0]));
      const ys = tf.tensor2d(trainingData.map(d => d.output));
      await model.fit(xs, ys, {
        epochs: 100,
        shuffle: true
      });
    }

    async function respond() {
      const input = document.getElementById("user-input").value.toLowerCase();
      const vector = textToVector(input);
      const prediction = model.predict(vector);
      const result = await prediction.array();

      const idx = result[0].indexOf(Math.max(...result[0]));
      const responseBox = document.getElementById("response");

      if (idx === 0) {
        const match = input.match(/(\d+)\s*[\+]\s*(\d+)/);
        if (match) {
          const a = parseInt(match[1]);
          const b = parseInt(match[2]);
          responseBox.innerText = `${a} + ${b} = ${a + b}`;
        } else {
          responseBox.innerText = "Addition command detected, but numbers not found.";
        }
      } else if (idx === 1) {
        const match = input.match(/(\d+)\s*[\*xX]\s*(\d+)/);
        if (match) {
          const a = parseInt(match[1]);
          const b = parseInt(match[2]);
          responseBox.innerText = `${a} × ${b} = ${a * b}`;
        } else {
          responseBox.innerText = "Multiplication detected, but numbers missing.";
        }
      } else if (idx === 2) {
        const match = input.match(/(\d+)/);
        if (match) {
          const number = parseInt(match[1]);
          responseBox.innerText = `Binary: ${number.toString(2)}\nHex: ${number.toString(16).toUpperCase()}`;
        } else {
          responseBox.innerText = "No number found to convert.";
        }
      } else {
        responseBox.innerText = "Sorry, I couldn’t understand that.";
      }
    }

    // Eğitim başlat
    trainModel();
  </script>
</body>
</html>
